System.register("chunks:///_virtual/Point.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,i,c,r,s,h,a,d,l,p,u,f,g;return{setters:[function(e){n=e.inherits,t=e.createSuper,o=e.classCallCheck,i=e.defineProperty,c=e.assertThisInitialized,r=e.createClass,s=e.createForOfIteratorHelper},function(e){h=e.cclegacy,a=e._decorator,d=e.Vec2,l=e.Vec3,p=e.Node,u=e.Label,f=e.UITransform,g=e.Component}],execute:function(){var v;h._RF.push({},"48658v5mHpA9ZxWe+V1F621","Point",void 0);var y=a.ccclass;e("Point",y("Point")(v=function(e){n(a,e);var h=t(a);function a(){var e;o(this,a);for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return e=h.call.apply(h,[this].concat(t)),i(c(e),"_point",0),i(c(e),"endVec2",new d),i(c(e),"endVec3",new l),e}return r(a,[{key:"point",get:function(){return this._point}},{key:"onEnable",value:function(){this.node.on("Choosed",this.onChoosed,this),this.node.children[1].children[0].on(p.EventType.TOUCH_END,this.touchend,this),this._point=0,this.node.children[1].getComponent(u).string="â–¼"}},{key:"onDisable",value:function(){this.node.off("Choosed",this.onChoosed,this),this.node.children[1].children[0].off(p.EventType.TOUCH_END,this.touchend,this)}},{key:"onChoosed",value:function(e){e.propagationStopped=!0,this.node.children[1].children[0].active=!this.node.children[1].children[0].active}},{key:"touchend",value:function(e){e.propagationStopped=!0,e.getUILocation(this.endVec2),this.endVec3.x=this.endVec2.x,this.endVec3.y=this.endVec2.y,this.endVec3.z=0,e.target.getComponent(f).convertToNodeSpaceAR(this.endVec3,this.endVec3),this.endVec2.x=this.endVec3.x,this.endVec2.y=this.endVec3.y;var n,t=s(e.target.children);try{for(t.s();!(n=t.n()).done;){var o=n.value;if(o.getComponent(f).getBoundingBox().contains(this.endVec2)){this._point=Number(o.name),e.target.active=!1,e.target.parent.getComponent(u).string=o.children[0].getComponent(u).string;break}}}catch(e){t.e(e)}finally{t.f()}}}]),a}(g))||v);h._RF.pop()}}}));

System.register("chunks:///_virtual/Room_3",["./Point.ts","./Room_3.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Room_3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UI.ts","./Room_UI.ts","./Card.ts","./Global.ts","./Room.ts","./Point.ts","./Wasm.ts","./Player.ts"],(function(e){var t,a,i,r,n,s,o,l,h,c,d,u,m,p,f,v,y,g,_,C,w,A,b,k,P,S,R,N,B,E,I;return{setters:[function(e){t=e.inherits,a=e.createSuper,i=e.classCallCheck,r=e.createClass,n=e.get,s=e.getPrototypeOf},function(e){o=e.cclegacy,l=e._decorator,h=e.assetManager,c=e.SpriteFrame,d=e.Sprite,u=e.Color,m=e.Prefab,p=e.instantiate,f=e.BufferAsset,v=e.director,y=e.Label,g=e.Widget},function(e){_=e.createNode,C=e.appendLabel,w=e.mycolor,A=e.appendSprite,b=e.createMsgbox},function(e){k=e.createPlayer},function(e){P=e.Card},function(e){S=e.mylang,R=e.mygame},function(e){N=e.Room},function(e){B=e.Point},function(e){E=e.Wasm},function(e){I=e.Player}],execute:function(){var U;o._RF.push({},"cd91akRduhL57Nctquy//8/","Room_3",void 0);var O=l.ccclass;e("Room_3",O("Room_3")(U=function(e){t(l,e);var o=a(l);function l(){return i(this,l),o.apply(this,arguments)}return r(l,[{key:"init",value:function(e,t){var a=this,i=h.getBundle("Room_3"),r=_("Pass",this.Opt,.465,.465,.55,.37,!1,void 0,this.node);switch(C(r,S.room.pass,64,w,void 0,1),r=_("Trust",this.Opt,.325,.605,.55,.37,!1,void 0,this.node),C(r,S.room.trust,64,w,void 0,1),r=_("Distrust",this.Opt,.605,.325,.55,.37,!1,void 0,this.node),C(r,S.room.distrust,64,w,void 0,1),k("Player0",this.node,.025,.92,.87,.025,e,t),this.gamers){case 2:k("Player1",this.node,.92,.025,.025,.87,e,t);break;case 3:k("Player1",this.node,.92,.025,.4475,.4475,e,t),k("Player2",this.node,.025,.92,.025,.87,e,t);break;case 4:k("Player1",this.node,.92,.025,.4475,.4475,e,t),k("Player2",this.node,.92,.025,.025,.87,e,t),k("Player3",this.node,.025,.92,.4475,.4475,e,t);break;case 5:k("Player1",this.node,.92,.025,.4475,.4475,e,t),k("Player2",this.node,.92,.025,.115,.78,e,t),k("Player3",this.node,.025,.92,.115,.78,e,t),k("Player4",this.node,.025,.92,.4475,.4475,e,t);break;case 6:k("Player1",this.node,.935,.01,.545,.35,e,t),k("Player2",this.node,.935,.01,.285,.61,e,t),k("Player3",this.node,.935,.01,.025,.87,e,t),k("Player4",this.node,.01,.935,.025,.87,e,t),k("Player5",this.node,.01,.935,.285,.61,e,t)}_("RoundArea",this.node,.25,.25,.1,.4),r=_("Show",this.node,.8,.08,.57,.37,!1),A(r,null),i.load("default_sprite_splash/spriteFrame",c,(function(e,t){var i=a.node.getChildByName("Show").getComponent(d);i.color=u.BLACK,i.spriteFrame=t}));var n=_("Number",r,0,.67,0,0);C(n,"",46,u.RED,void 0,void 0,void 0,void 0,void 0,e),n=_("Label",r,.33,.33,0,0),C(n,S.room.show_1,34),n=_("Point",r,.67,0,0,0),C(n,"",46,w,void 0,void 0,void 0,void 0,void 0,e);for(var s=0;s<this.gamers;s+=1)this.all_players[s]=this.node.getChildByName("Player"+s).getComponent(I);this.all_cards.forEach((function(e){return e.face=a.cardpics[0]}));var o=this;this.importObj={imports:{imported_func:function(e,t,a,i,r,n){switch(e){case 2:o.insertCard(t,a);break;case 4:if(o.Countdown_Discard(t,a),1===n&&(o.playstep+=1,o.handArea.resumeSystemEvents(!1)),0===t){if(0==r)return void(o.node.getChildByName("Point").active=!0);1===i?(o.Opt.getChildByName("Discard").active=!1,o.Opt.getChildByName("Trust").active=!0,o.Opt.getChildByName("Distrust").active=!0):(o.Opt.getChildByName("Pass").active=!0,o.node.getChildByName("Point").active=!0)}break;case 7:o.setPlayer(t,a,i);break;case 8:o.node.getChildByName("RoundArea").removeAllChildren();break;case 9:o.End();break;case 11:o.setBanker(t);break;case 12:o.Deal();break;case 15:o.Flip(t,a,i);break;case 17:o.Countdown_Start(t);break;case 19:o.handArea.resumeSystemEvents(!1);break;case 20:o.ShowShow(t,a,i);break;case 21:o.ResumeAllCards()}}}},i.load("Point",m,(function(e,t){e||(p(t).parent=a.node,i.load("room_3",f,(function(e,t){a.AI=new E(t.buffer(),256,a.importObj),v.emit("Ready")})))}))}},{key:"ResetRoom",value:function(){this.ClearRoom(),this.netstep=0,this.node.getChildByName("Point").active=!1,this.node.getChildByName("Show").active=!1}},{key:"PreDeal",value:function(){}},{key:"Handle_Wrong_Choose",value:function(e,t){1!==e||b(S.room.small)}},{key:"handle_play",value:function(e,t,a){var i=this;t.forEach((function(e,t){return i.AI.wasm_view.setUint8(t,e)})),this.call_wasm_func(13,t.length);var r=this.AI.wasm_view.getUint8(0);if(10===r){this.playstep+=1;var n=this.AI.wasm_view.getUint8(1),s=this.AI.wasm_view.getUint8(2);return 0===e?(this.timer.getComponent(y).string="",this.Opt.children.forEach((function(e){return e.active=!1})),this.node.getChildByName("Point").active=!1):a&&(this.all_players[e].isAi=!1),void this.Flip(e,n,s)}if(0===r){if(t.length>0){var o=t.pop();this.ShowShow(e,t.length,o);var l=this.node.getChildByName("RoundArea");0===e?(t.forEach((function(e){var t=i.handArea.children.findIndex((function(t){return t.getComponent(P).face===e}));i.handArea.children[t].getComponent(P).selected=!1,i.handArea.children[t].getComponent(P).face=i.cardpics[0],i.handArea.children[t].parent=l})),this.ShowHand(!0)):t.forEach((function(e){var t=i.getFreeCard(e);i.all_cards[t].node.parent=l})),this.showCards(l)}return 0===e?(this.timer.getComponent(y).string="",this.Opt.children.forEach((function(e){return e.active=!1})),this.node.getChildByName("Point").active=!1):a&&(this.all_players[e].isAi=!1),this.playstep+=1,void this.call_wasm_func(14)}a&&(this.all_players[e].isAi=!0,this.Discard(e))}},{key:"ResumeAllCards",value:function(){var e=0,t=this.AI.wasm_view.getUint8(e);e+=1;for(var a=0;a<t;a+=1){var i=this.AI.wasm_view.getUint8(e+a),r=this.getFreeCard(i);this.all_cards[r].face=this.cardpics[i],this.all_cards[r].node.parent=this.handArea}e+=t,this.ShowHand(!0);var n=this.node.getChildByName("RoundArea");t=this.AI.wasm_view.getUint8(e),e+=1;for(var s=0;s<t;s+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(e+s))].node.parent=n;e+=t,t=this.AI.wasm_view.getUint8(e),e+=1;for(var o=0;o<t;o+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(e+o))].node.parent=n;e+=t,this.showCards(n)}},{key:"call_wasm_func",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e){case 13:this.AI.call_wasm_func(13,t);break;case 14:this.AI.call_wasm_func(14);break;case 15:this.AI.call_wasm_func(15);break;case 17:this.AI.call_wasm_func(17);break;default:n(s(l.prototype),"call_wasm_func",this).call(this,e,t)}}},{key:"ClearRoom",value:function(){var e=this;n(s(l.prototype),"ClearRoom",this).call(this),this.all_cards.forEach((function(t){return t.face=e.cardpics[0]}))}},{key:"onChoosed",value:function(e){var t=this;switch(e.propagationStopped=!0,e.detail){case"Discard":var a=this.CardsSelected();if(0===a.length)return void b(S.room.no_card);var i=this.node.getChildByName("Point").getComponent(B).point;if(0===i)return void b(S.room.no_point);a.push(i),this.Opt.pauseSystemEvents(!1),a.forEach((function(e,a){return t.AI.wasm_view.setUint8(a,e)})),this.call_wasm_func(5,a.length);var r=this.AI.wasm_view.getUint8(0);0===r?R.alone?v.emit("ManagerMsg","play",this.all_players[0].playerid,this.playstep,a,!1):this.SendCards(a):(this.Opt.resumeSystemEvents(!1),this.Handle_Wrong_Choose(r,a));break;case"Pass":case"Trust":this.Opt.pauseSystemEvents(!1),R.alone?v.emit("ManagerMsg","play",this.all_players[0].playerid,this.playstep,[],!1):this.SendCards([]);break;case"Distrust":this.Opt.pauseSystemEvents(!1),this.call_wasm_func(5);var o=this.AI.wasm_view.getUint8(0);R.alone?v.emit("ManagerMsg","play",this.all_players[0].playerid,this.playstep,[o],!1):this.SendCards([o]);break;case"Seat":"Player0"!==e.target.name&&n(s(l.prototype),"onChoosed",this).call(this,e);break;default:n(s(l.prototype),"onChoosed",this).call(this,e)}}},{key:"insertCard",value:function(e,t){var a=this.getFreeCard(e);this.all_cards[a].face=this.cardpics[e],this.all_cards[a].node.parent=this.handArea,this.all_cards[a].node.setSiblingIndex(t),this.ShowHand()}},{key:"Flip",value:function(e,t,a){var i=this,r=this.node.getChildByName("RoundArea"),n=r.children.length-t-1;0===e&&0===a?r.children.forEach((function(e){return e.getComponent(P).face=i.cardpics[Number(e.name)]})):r.children.filter((function(e,t){return t>n})).forEach((function(e){return e.getComponent(P).face=i.cardpics[Number(e.name)]}));this.timerid=setTimeout((function(){if(i.timerid=0,i.playstep+=1,i.call_wasm_func(15),0===a){for(var e=i.AI.wasm_view.getUint8(0),n=new Array(e),s=0;s<e;s+=1)n[s]=i.AI.wasm_view.getUint8(1+s);r.children.forEach((function(e){return e.getComponent(P).face=i.cardpics[0]})),r.removeAllChildren(),i.handArea.children.forEach((function(e){return e.getComponent(P).face=i.cardpics[0]})),i.handArea.removeAllChildren();for(var o=0;o<e;o+=1){var l=i.getFreeCard(n[o]);i.all_cards[l].face=i.cardpics[n[o]],i.all_cards[l].node.parent=i.handArea}i.ShowHand()}else{var h=r.children.length-t-1;r.children.filter((function(e,t){return t>h})).forEach((function(e){return e.getComponent(P).face=i.cardpics[0]})),r.removeAllChildren()}}),3e3)}},{key:"End",value:function(){var e=this;if(!R.alone){this.delayid=setTimeout((function(){e.delayid=0,v.emit("WsRequest","end")}),500*this.DelayNum())}this.timerid=setTimeout((function(){e.timerid=0,e.ClearRoom(),e.all_players.forEach((function(e){return e.labelTopRight=""})),e.call_wasm_func(17)}),2e3)}},{key:"setBanker",value:function(e){this.all_players.forEach((function(t,a){t.labelRight=a===e?S.room.banker:""}))}},{key:"ShowShow",value:function(e,t,a){var i,r=this.node.getChildByName("Show"),n=this.all_players[e].node.getComponent(g),s=r.getComponent(g);switch(n.left<n.right?(s.left=1-n.right,s.right=.88-s.left):(s.right=1-n.left,s.left=.88-s.right),s.bottom=n.bottom,s.top=.94-s.bottom,r.getChildByName("Number").getComponent(y).string=String(t),a){case 13:i="K";break;case 12:i="Q";break;case 11:i="J";break;case 1:i="A";break;default:i=String(a)}r.getChildByName("Point").getComponent(y).string=i,r.active=!0}}]),l}(N))||U);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Room_3', 'chunks:///_virtual/Room_3'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
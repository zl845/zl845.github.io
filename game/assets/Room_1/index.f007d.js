System.register("chunks:///_virtual/Room_1",["./Room_1.ts"],(function(){return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/Room_1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UI.ts","./Room_UI.ts","./Card.ts","./Global.ts","./Room.ts","./Wasm.ts","./Player.ts"],(function(e){var t,s,a,i,r,n,o,h,l,c,u,d,m,f,p,_,g,v,A,w,C,y,b,k,S,I,R,U;return{setters:[function(e){t=e.inherits,s=e.createSuper,a=e.classCallCheck,i=e.createClass,r=e.get,n=e.getPrototypeOf},function(e){o=e.cclegacy,h=e._decorator,l=e.Widget,c=e.assetManager,u=e.BufferAsset,d=e.director,m=e.Label},function(e){f=e.createNode,p=e.appendLabel,_=e.mycolor,g=e.createMsgbox},function(e){v=e.Template6,A=e.Template5,w=e.Template4,C=e.Template3,y=e.Template2},function(e){b=e.Card},function(e){k=e.mylang,S=e.mygame},function(e){I=e.Room},function(e){R=e.Wasm},function(e){U=e.Player}],execute:function(){var E;o._RF.push({},"938acS2HVtKzbkqDHmspdYU","Room_1",void 0);var O=h.ccclass;e("Room_1",O("Room_1")(E=function(e){t(h,e);var o=s(h);function h(){return a(this,h),o.apply(this,arguments)}return i(h,[{key:"init",value:function(e,t){var s=this;6===this.gamers&&(this.auto.getComponent(l).top=.75,this.auto.getComponent(l).bottom=.17,this.handArea.getComponent(l).top=.74,this.Opt.getChildByName("Discard").getComponent(l).top=.75,this.Opt.getChildByName("Discard").getComponent(l).bottom=.17,this.timer.getComponent(l).left=.02,this.timer.getComponent(l).right=.92),this.Opt.getComponent(l).bottom=.17;var a=f("Pass",this.Opt,.465,.465,.55,.37,!1,void 0,this.node);switch(p(a,k.room.pass,64,_,void 0,1),this.gamers){case 2:y(e,this.node,this.curAreas,this.small_curAreas,this.outAreas,t);break;case 3:C(e,this.node,this.curAreas,this.small_curAreas,this.outAreas,t);break;case 4:w(e,this.node,this.curAreas,this.small_curAreas,this.outAreas,t);break;case 5:A(e,this.node,this.curAreas,this.small_curAreas,this.outAreas,t);break;case 6:v(e,this.node,this.curAreas,this.small_curAreas,this.outAreas,t)}for(var i=0;i<this.gamers;i+=1)this.all_players[i]=this.node.getChildByName("Player"+i).getComponent(U);var r=this;this.importObj={imports:{imported_func:function(e,t,s,a,i,n){switch(e){case 2:r.insertCard(t,s);break;case 4:r.Countdown_Discard(t,s),0===t&&0!==a&&(r.Opt.getChildByName("Pass").active=!0),1===i&&(r.playstep+=1,r.handArea.resumeSystemEvents(!1));break;case 7:r.setPlayer(t,s,a);break;case 8:r.CurToOut(t);break;case 9:r.End();break;case 11:r.setBanker(t);break;case 12:r.Deal();break;case 17:r.Countdown_Start(t);break;case 19:r.handArea.resumeSystemEvents(!1);break;case 21:r.ResumeAllCards()}}}},c.getBundle("Room_1").load("room_1",u,(function(e,t){e||(s.AI=new R(t.buffer(),256,s.importObj),d.emit("Ready"))}))}},{key:"ResetRoom",value:function(){this.ClearRoom(),this.netstep=0,this.showout=!1,this.all_players.forEach((function(e){return e.clear()}))}},{key:"PreDeal",value:function(){}},{key:"Handle_Wrong_Choose",value:function(e,t){1!==e?2!==e||g(k.room.no_min_card):g(k.room.illegal)}},{key:"handle_play",value:function(e,t,s){var a=this;if(t.forEach((function(e,t){return a.AI.wasm_view.setUint8(t,e)})),this.call_wasm_func(13,t.length),0===this.AI.wasm_view.getUint8(0)){if(t.length>0){var i=this.AI.wasm_view.getUint8(1);this.CurToOut(i);var r=this.showout?this.small_curAreas[e]:this.curAreas[e];0===e?(t.forEach((function(e){var t=a.handArea.children.findIndex((function(t){return t.getComponent(b).face===e}));a.showout&&a.handArea.children[t].setScale(a.scale,a.scale,1),a.handArea.children[t].getComponent(b).selected=!1,a.handArea.children[t].parent=r})),this.ShowHand(!0)):t.forEach((function(e){var t=a.getFreeCard(e);a.showout&&a.all_cards[t].node.setScale(a.scale,a.scale,1),a.all_cards[t].node.parent=r})),this.resortChildren(r),this.showCards(r)}0===e?(this.timer.getComponent(m).string="",this.Opt.children.forEach((function(e){return e.active=!1}))):s&&(this.all_players[e].isAi=!1),this.playstep+=1,this.call_wasm_func(14)}else s&&(this.all_players[e].isAi=!0,this.Discard(e))}},{key:"ResumeAllCards",value:function(){var e=0,t=this.AI.wasm_view.getUint8(e);e+=1;for(var s=0;s<t;s+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(e+s))].node.parent=this.handArea;e+=t;for(var a=this.scale,i=0;i<this.gamers;i+=1){t=this.AI.wasm_view.getUint8(e),e+=1;for(var r,n=0;n<t;n+=1)r=this.getFreeCard(this.AI.wasm_view.getUint8(e+n)),this.all_cards[r].node.setScale(a,a,1),this.all_cards[r].node.parent=this.outAreas[i];0!==i&&this.showCards(this.outAreas[i],!0),e+=t}this.ShowHand(!0,!1),t=this.AI.wasm_view.getUint8(e),e+=1;var o=this.AI.wasm_view.getUint8(e);e+=1;for(var h=0;h<t;h+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(e+h))].node.parent=this.curAreas[o];this.resortChildren(this.curAreas[o]),this.showCards(this.curAreas[o]),e+=t}},{key:"call_wasm_func",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e){case 13:this.AI.call_wasm_func(13,t);break;case 14:this.AI.call_wasm_func(14);break;case 17:this.AI.call_wasm_func(17);break;default:r(n(h.prototype),"call_wasm_func",this).call(this,e,t)}}},{key:"onChoosed",value:function(e){switch(e.propagationStopped=!0,e.detail){case"Pass":this.Opt.pauseSystemEvents(!1),S.alone?d.emit("ManagerMsg","play",this.all_players[0].playerid,this.playstep,[],!1):this.SendCards([]);break;default:r(n(h.prototype),"onChoosed",this).call(this,e)}}},{key:"insertCard",value:function(e,t){var s=this.getFreeCard(e);this.all_cards[s].node.parent=this.handArea,this.all_cards[s].node.setSiblingIndex(t),this.ShowHand()}},{key:"CurToOut",value:function(e){var t=this,s=this.showout?this.small_curAreas[e]:this.curAreas[e];this.showout||s.children.forEach((function(e){return e.setScale(t.scale,t.scale,1)})),this.relocation(s,this.outAreas[e]),0===e?this.ShowHand():this.showCards(this.outAreas[e],!this.showout)}},{key:"End",value:function(){var e=this;if(!S.alone){this.delayid=setTimeout((function(){e.delayid=0,d.emit("WsRequest","end")}),500*this.DelayNum())}for(var t,s,a=0,i=this.scale,r=0;r<this.gamers;r+=1)if(t=this.AI.wasm_view.getUint8(a),a+=1,t>0){if(s=this.showout?this.small_curAreas[r]:this.curAreas[r],0===r){for(var n=t-1;n>-1;n-=1)this.handArea.children[n].parent=s;this.ShowHand()}else for(var o=0;o<t;o+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(a+o))].node.parent=s;a+=t,this.showout&&s.children.forEach((function(e){return e.setScale(i,i,1)})),this.showCards(s)}this.timerid=setTimeout((function(){e.timerid=0,e.ClearRoom(),e.all_players.forEach((function(e){return e.labelTopRight=""})),e.call_wasm_func(17)}),5e3)}},{key:"setBanker",value:function(e){this.all_players.forEach((function(t,s){t.labelRight=s===e?k.room.banker:""}))}},{key:"resortChildren",value:function(e){if(!(e.children.length<5)){for(var t=e.children.map((function(e){return String(e.getComponent(b).face%13)})),s=0;s<5;s+=1)switch(t[s]){case"12":t[s]="C";break;case"11":t[s]="B";break;case"10":t[s]="A"}var a=t.join("");/^.(.)\1\1\1$/.test(a)||"26543"===a?e.children[0].setSiblingIndex(-1):(/^(.)\1(.)\2\2$/.test(a)||"21543"===a)&&(e.children[0].setSiblingIndex(-1),e.children[0].setSiblingIndex(-1))}}}]),h}(I))||E);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Room_1', 'chunks:///_virtual/Room_1'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
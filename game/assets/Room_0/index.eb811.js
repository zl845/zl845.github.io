System.register("chunks:///_virtual/Room_0",["./Room_0.ts","./Signal.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Room_0.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UI.ts","./Room_UI.ts","./Global.ts","./Card.ts","./Room.ts","./Signal.ts","./Wasm.ts","./Player.ts"],(function(e){var t,i,a,s,n,r,o,l,h,d,c,u,m,g,v,f,p,w,y,_,C,A,b,k,S,N,B,I,T,U,R;return{setters:[function(e){t=e.inherits,i=e.createSuper,a=e.classCallCheck,s=e.defineProperty,n=e.assertThisInitialized,r=e.createClass,o=e.get,l=e.getPrototypeOf},function(e){h=e.cclegacy,d=e._decorator,c=e.CacheMode,u=e.Color,m=e.assetManager,g=e.Prefab,v=e.instantiate,f=e.BufferAsset,p=e.director,w=e.Label},function(e){y=e.createNode,_=e.appendLabel,C=e.mycolor,A=e.createMsgbox},function(e){b=e.Template5,k=e.Template4},function(e){S=e.mylang,N=e.mygame},function(e){B=e.Card},function(e){I=e.Room},function(e){T=e.Signal},function(e){U=e.Wasm},function(e){R=e.Player}],execute:function(){var E;h._RF.push({},"db005r/TrpAwo923vmRs66e","Room_0",void 0);var P=d.ccclass;e("Room_0",P("Room_0")(E=function(e){t(d,e);var h=i(d);function d(){var e;a(this,d);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e=h.call.apply(h,[this].concat(i)),s(n(e),"grab_end",!1),s(n(e),"TipsNodes",new Array(5)),s(n(e),"TipsCur",void 0),e}return r(d,[{key:"init",value:function(e,t){var i=this,a=y("ViewPledge",this.node,.915,.015,.87,.05,!1,"Choosed");_(a,S.room.viewpledge,64,C,c.BITMAP,1),this.Opt.pauseSystemEvents(!1),a=y("Pledge",this.Opt,.915,.015,.7,.22,!1,void 0,this.node),_(a,S.room.pledge,64,C,c.BITMAP,1),(a=y("Grab",this.node,.3375,.3375,.54,.36,void 0,"Touched")).pauseSystemEvents(!1);var s=y("Diamond",a,.8,.045,0,0,!1);_(s,"♦",96,u.RED,void 0,void 0,void 0,void 0,void 0,e),s=y("Club",a,.545,.3,0,0,!1),_(s,"♣",96,u.BLACK,void 0,void 0,void 0,void 0,void 0,e),s=y("Heart",a,.3,.545,0,0,!1),_(s,"♥",96,u.RED,void 0,void 0,void 0,void 0,void 0,e),s=y("Spade",a,.045,.8,0,0,!1),_(s,"♠",96,u.BLACK,void 0,void 0,void 0,void 0,void 0,e),5===this.gamers?(a=y("Rank",this.node,.76,.085,.45,.467),b(e,this.node,this.curAreas,this.small_curAreas,this.outAreas,t)):(a=y("Rank",this.node,.025,.82,.025,.892),k(e,this.node,this.curAreas,this.small_curAreas,this.outAreas,t)),s=y("Label",a,0,.7,0,.5),_(s,S.room.rank,28,u.BLACK,c.BITMAP,1),s=y("Label",a,0,.7,.5,0),_(s,S.room.score,28,u.BLACK,c.BITMAP,1),s=y("Rank",a,.3,.42,0,.5),_(s,"3",46,u.MAGENTA,void 0,void 0,void 0,void 0,void 0,e),s=y("Score",a,.3,.42,.5,0),_(s,"0",36,u.MAGENTA,void 0,void 0,void 0,void 0,void 0,e),s=y("Suit",a,.58,.14,0,0),_(s,"",80,void 0,void 0,void 0,void 0,void 0,void 0,e),s=y("Times",a,.86,0,.5,0),_(s,"",30,C,void 0,void 0,void 0,void 0,void 0,e),a=y("Remaind",this.node,.35,.35,.4,.4);for(var n=0;n<5;n+=1)this.TipsNodes[n]=y("Label",null,.05,.73,.32,.48),_(this.TipsNodes[n],"",24,u.BLUE,void 0,void 0,void 0,void 0,void 0,e);this.TipsCur=y("Label",null,.34,.34,.2,.55),_(this.TipsCur,"",36,u.BLUE,void 0,void 0,void 0,void 0,void 0,e);for(var r=0;r<this.gamers;r+=1)this.all_players[r]=this.node.getChildByName("Player"+r).getComponent(R);var o=this;this.importObj={imports:{imported_func:function(e,t,i,a,s,n){switch(e){case 0:o.lightGrab(t);break;case 1:o.Suit(t,i,a);break;case 2:o.insertCard(t,i,a,s,n);break;case 3:o.ConfirmFriends(t,i,a);break;case 4:o.Countdown_Discard(t,i),a>0&&(o.playstep+=1,0===t&&(o.Opt.getChildByName("Discard").active=!1,o.Opt.getChildByName("Pledge").active=!0,5===o.gamers&&o.node.getChildByName("Signal").getComponent(T).reset(s,a)));break;case 6:o.setScore(t);break;case 7:o.setPlayer(t,i,a);break;case 8:o.Turn();break;case 9:o.End();break;case 10:o.ClearRank(t);break;case 11:o.setBanker(t);break;case 12:o.Deal();break;case 13:o.Countdown_Grab(t);break;case 15:o.setOwner(t),o.setSuit(i,a);break;case 16:o.countdown=t;break;case 17:o.Countdown_Start(t);break;case 18:o.PostRemainder();break;case 19:o.handArea.resumeSystemEvents(!1),o.grab_end=!0;break;case 20:0===t&&(o.node.getChildByName("ViewPledge").active=!0),5===o.gamers&&o.node.getChildByName("Signal").getComponent(T).set(i,a);break;case 21:o.ResumeAllCards()}}}};var l=m.getBundle("Room_0");5===this.gamers?l.load("Signal",g,(function(e,t){var a=v(t);a.parent=i.node,a.setSiblingIndex(i.node.getChildByName("Rank").getSiblingIndex()+1),a.getComponent(T).init(i.decks),l.load("room_0",f,(function(e,t){e||(i.AI=new U(t.buffer(),1024,i.importObj),p.emit("Ready"))}))})):l.load("room_0",f,(function(e,t){e||(i.AI=new U(t.buffer(),1024,i.importObj),p.emit("Ready"))}))}},{key:"ResetRoom",value:function(){this.ClearRoom(),this.netstep=0,this.showout=!1,this.all_players.forEach((function(e){return e.clear()})),this.ClearRank(3),this.node.getChildByName("Grab").pauseSystemEvents(!1),this.node.getChildByName("Grab").children.forEach((function(e){return e.active=!1})),this.grab_end=!1,5===this.gamers&&(this.node.getChildByName("Signal").getComponent(T).set(1,1),this.node.getChildByName("Signal").getComponent(T).clear())}},{key:"PreDeal",value:function(){this.node.getChildByName("Grab").resumeSystemEvents(!1),this.grab_end=!1}},{key:"Handle_Wrong_Choose",value:function(e,t){if(1!==e)if(2!==e)3!==e?4!==e||A(S.room.hide_legal):A(S.room.hide_same);else{var i=this.showout?this.small_curAreas[this.gamers-1]:this.curAreas[this.gamers-1];A("".concat(S.room.right_num).concat(i.children.length,"\n").concat(S.room.select_num).concat(t.length))}else A(S.room.multi_suit)}},{key:"handle_play",value:function(e,t,i){var a=this;t.forEach((function(e,t){return a.AI.wasm_view.setUint8(t,e)})),this.call_wasm_func(13,t.length);var s=this.AI.wasm_view.getUint8(0);if(10===s){if(5===this.gamers){var n=t.pop(),r=t.pop();this.node.getChildByName("Signal").getComponent(T).set(r,n)}var o=this.node.getChildByName("Remaind");if(0===e){this.timer.getComponent(w).string="",this.Opt.getChildByName("Pledge").active=!1,this.node.getChildByName("ViewPledge").active=!0,t.forEach((function(e){var t=a.handArea.children.findIndex((function(t){return t.getComponent(B).face===e}));a.handArea.children[t].getComponent(B).selected=!1,a.handArea.children[t].parent=o})),this.TipsNodes.forEach((function(e){return e.parent=null}));for(var l=new Array(5),h=0;h<5;h+=1)l[h]=this.AI.wasm_view.getUint8(1+h);for(var d=0,c=0;c<5;c+=1)0!==l[c]&&(d+=l[c],this.TipsNodes[c].getComponent(w).string=String(l[c]),this.TipsNodes[c].parent=this.handArea.children[d-1]);this.ShowHand(!0)}else t.forEach((function(e){return a.all_cards[a.getFreeCard(e)].node.parent=o})),i&&(this.all_players[e].isAi=!1);return this.showCards(o,!0),this.playstep+=1,void this.call_wasm_func(14)}if(0!==s&&6!==s)i&&(this.all_players[e].isAi=!0,this.Discard(e));else{var u=1,m=this.showout?this.small_curAreas[e]:this.curAreas[e];if(0===e){t.forEach((function(e){var t=a.handArea.children.findIndex((function(t){return t.getComponent(B).face===e}));a.showout&&a.handArea.children[t].setScale(a.scale,a.scale,1),a.handArea.children[t].getComponent(B).selected=!1,a.handArea.children[t].parent=m}));for(var g=new Array(5),v=0;v<5;v+=1)g[v]=this.AI.wasm_view.getUint8(1+v);u+=5,this.TipsNodes.forEach((function(e){return e.parent=null}));for(var f=0,p=0;p<5;p+=1)0!==g[p]&&(f+=g[p],this.TipsNodes[p].getComponent(w).string=String(g[p]),this.TipsNodes[p].parent=this.handArea.children[f-1]);this.ShowHand(!0),this.timer.getComponent(w).string="",this.Opt.getChildByName("Discard").active=!1}else t.forEach((function(e){var t=a.getFreeCard(e);a.showout&&a.all_cards[t].node.setScale(a.scale,a.scale,1),a.all_cards[t].node.parent=m})),i&&(this.all_players[e].isAi=!1);var y=t.length;if(y>6&&null===this.TipsCur.parent&&(this.TipsCur.getComponent(w).string=String(y),this.TipsCur.parent=m.children[y-1]),this.showCards(m),6===s){var _=this.AI.wasm_view.getUint8(u);u+=1;for(var C=new Array(_),A=0;A<_;A+=1)C[A]=this.AI.wasm_view.getUint8(A+u);u+=_;var b=new Array(5),k=new Array(t.length-_);if(0===e){for(var S=0;S<5;S+=1)b[S]=this.AI.wasm_view.getUint8(u+S);u+=5;for(var N=0;N<k.length;N+=1)k[N]=this.AI.wasm_view.getUint8(u+N);u+=k.length}this.timerid=setTimeout((function(){a.timerid=0,a.playstep+=1;for(var t,i=a.showout?a.small_curAreas[e]:a.curAreas[e],s=0,n=0,r=0;r<i.children.length;)s==_||i.children[r].getComponent(B).face!==C[s]?(a.showout&&i.children[r].setScale(1,1,1),0===e?((t=i.children[r]).parent=a.handArea,t.setSiblingIndex(k[n]),n+=1):i.children[r].parent=null):(r+=1,s+=1);if(_>6?(a.TipsCur.getComponent(w).string=String(_),a.TipsCur.parent=i.children[_-1]):a.TipsCur.parent=null,a.showCards(i),0===e){a.TipsNodes.forEach((function(e){return e.parent=null}));for(var o=0,l=0;l<5;l+=1)0!==b[l]&&(o+=b[l],a.TipsNodes[l].getComponent(w).string=String(b[l]),a.TipsNodes[l].parent=a.handArea.children[o-1]);a.ShowHand(!0)}a.call_wasm_func(14)}),2e3)}else this.playstep+=1,this.call_wasm_func(14)}}},{key:"ResumeAllCards",value:function(){var e=0,t=this.AI.wasm_view.getUint8(e);e+=1;for(var i=0;i<t;i+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(e+i))].node.parent=this.handArea;e+=t;for(var a=this.scale,s=0;s<this.gamers;s+=1){t=this.AI.wasm_view.getUint8(e),e+=1;for(var n=0;n<t;n+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(e+n))].node.parent=this.curAreas[s];this.showCards(this.curAreas[s]),e+=t,t=this.AI.wasm_view.getUint8(e),e+=1;for(var r,o=0;o<t;o+=1)r=this.getFreeCard(this.AI.wasm_view.getUint8(e+o)),this.all_cards[r].node.setScale(a,a,1),this.all_cards[r].node.parent=this.outAreas[s];0!==s&&this.showCards(this.outAreas[s],!0),e+=t}t=this.AI.wasm_view.getUint8(e),e+=1;for(var l=this.node.getChildByName("Remaind"),h=0;h<t;h+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(e+h))].node.parent=l;this.showCards(l,!0),e+=t,this.TipsNodes.forEach((function(e){return e.parent=null}));for(var d=new Array(5),c=0;c<5;c+=1)d[c]=this.AI.wasm_view.getUint8(e+c);for(var u=0,m=0;m<5;m+=1)0!==d[m]&&(u+=d[m],this.TipsNodes[m].getComponent(w).string=String(d[m]),this.TipsNodes[m].parent=this.handArea.children[u-1]);this.ShowHand(!0,!1)}},{key:"call_wasm_func",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(e){case 6:this.AI.call_wasm_func(6);break;case 7:this.AI.call_wasm_func(7);break;case 9:this.AI.call_wasm_func(9,t);break;case 12:this.AI.call_wasm_func(12);break;case 13:this.AI.call_wasm_func(13,t);break;case 14:this.AI.call_wasm_func(14);break;case 15:this.AI.call_wasm_func(15);break;case 16:this.AI.call_wasm_func(16);break;case 17:this.AI.call_wasm_func(17);break;default:o(l(d.prototype),"call_wasm_func",this).call(this,e,t)}}},{key:"HandleMsg",value:function(e,t,i){var a=new DataView(e),s=2;if(41!==t||0!==i)if(44!==t||0!==i)o(l(d.prototype),"HandleMsg",this).call(this,e,t,i);else{if(this.grab_end)return;var n=a.getUint32(s);s+=4;var r=a.getUint16(s);s+=2;var h=a.getUint32(s);s+=4;var c=a.getUint8(s);s+=1;var u=a.getUint8(s);s+=1;var m=a.getUint32(s);s+=4;var g=a.getUint32(s);if(s+=4,u<=this.decks){var v=this.all_players.findIndex((function(e){return e.playerid===h}));p.emit("ManagerMsg","grab",v,c,u,[m,g,r])}else n!==this.all_players[0].playerid&&this.Notice(n)}else this.grab_end||(this.grab_end=!0,this.delayid>0&&(clearTimeout(this.delayid),this.delayid=0))}},{key:"onManagerMsg",value:function(e,t,i,a,s){switch(e){case"grab":this.AI.wasm_view.setUint8(0,t),this.AI.wasm_view.setUint8(1,i),this.AI.wasm_view.setUint8(2,a),void 0!==s?(this.AI.wasm_view.setUint32(3,s[0]),this.AI.wasm_view.setUint32(7,s[1])):(this.AI.wasm_view.setUint32(3,0),this.AI.wasm_view.setUint32(7,0)),this.call_wasm_func(12),1===this.AI.wasm_view.getUint8(0)&&void 0!==s&&(this.netstep=s[2]+1);break;default:o(l(d.prototype),"onManagerMsg",this).call(this,e,t,i,a,s)}}},{key:"onChoosed",value:function(e){switch(e.propagationStopped=!0,e.detail){case"Diamond":case"Club":case"Heart":case"Spade":var t=this.node.getChildByName("Grab");t.pauseSystemEvents(!1);var i=t.children.findIndex((function(t){return t.name===e.detail}));this.call_wasm_func(9,i);var a=this.AI.wasm_view.getUint8(0);if(0==a)return;N.alone?p.emit("ManagerMsg","grab",0,i,a):this.SendGrab(this.all_players[0].playerid,i,a);break;case"Pledge":if(5===this.gamers){var s=this.node.getChildByName("Signal").getComponent(T);if(0===s.serial||16===s.suit||0===s.point)return void A(S.room.no_logic)}var n=this.CardsSelected();this.call_wasm_func(5,n.length);var r=this.AI.wasm_view.getUint8(0);if(0!==r)return void A(S.room.pledge_err+String(r));if(this.Opt.pauseSystemEvents(!1),5===this.gamers){var h=this.node.getChildByName("Signal").getComponent(T);n.push(h.serial),n.push(13*h.suit+h.point)}this.timerid>0&&(clearTimeout(this.timerid),this.timerid=0),N.alone?p.emit("ManagerMsg","play",this.all_players[0].playerid,this.playstep,n,!1):this.SendCards(n);break;case"ViewPledge":var c=this.node.getChildByName("Remaind");this.showCards(c,!(c.children[0].position.y===this.out_screen));break;default:o(l(d.prototype),"onChoosed",this).call(this,e)}}},{key:"setPlayer",value:function(e,t,i){switch(i){case 1:this.all_players[e].labelTopLeft=this.rankChar(t);break;default:o(l(d.prototype),"setPlayer",this).call(this,e,t,i)}}},{key:"SendGrab",value:function(e,t,i){var a=new ArrayBuffer(14),s=new DataView(a),n=0;s.setUint8(n,44),n+=1,s.setUint8(n,0),n+=1,s.setUint32(n,this.all_players[0].playerid),n+=4,s.setUint16(n,this.netstep),n+=2,s.setUint32(n,e),n+=4,s.setUint8(n,t),n+=1,s.setUint8(n,i),n+=1,p.emit("WsRequest","msg",a)}},{key:"lightGrab",value:function(e){this.node.getChildByName("Grab").resumeSystemEvents(!1),this.node.getChildByName("Grab").children[e].active=!0}},{key:"Suit",value:function(e,t,i){var a=this.all_players[i];a.isAi&&(0===i&&this.node.getChildByName("Grab").pauseSystemEvents(!1),N.alone?p.emit("ManagerMsg","grab",i,t,e):this.SendGrab(a.playerid,t,e))}},{key:"insertCard",value:function(e,t,i,a,s){var n=this.getFreeCard(e);this.all_cards[n].node.parent=this.handArea,this.all_cards[n].node.setSiblingIndex(t),this.TipsNodes[a].getComponent(w).string=String(i),this.TipsNodes[a].parent=this.handArea.children[s],this.ShowHand()}},{key:"ConfirmFriends",value:function(e,t,i){e!==t&&(this.all_players[e].labelRight=S.room.partner),this.all_players.forEach((function(e){return e.labelTopRight=""})),this.setScore(i)}},{key:"setScore",value:function(e){this.node.getChildByName("Rank").getChildByName("Score").getComponent(w).string=String(e)}},{key:"Turn",value:function(){var e=this;this.timerid=setTimeout((function(){e.timerid=0,e.playstep+=1,e.TipsCur.parent=null;var t=e.showout?e.small_curAreas[0]:e.curAreas[0];e.showout||t.children.forEach((function(t){return t.setScale(e.scale,e.scale,1)})),e.relocation(t,e.handArea),e.ShowHand();for(var i=1;i<e.gamers;i+=1){var a=e.showout?e.small_curAreas[i]:e.curAreas[i],s=e.outAreas[i];e.showout||a.children.forEach((function(t){return t.setScale(e.scale,e.scale,1)})),e.relocation(a,s),e.showCards(s,!e.showout)}e.call_wasm_func(16)}),3e3)}},{key:"End",value:function(){var e=this;if(!N.alone){this.delayid=setTimeout((function(){e.delayid=0,p.emit("WsRequest","end")}),500*this.DelayNum())}this.node.getChildByName("ViewPledge").active=!1,this.showCards(this.node.getChildByName("Remaind"));this.timerid=setTimeout((function(){e.timerid=0,e.ClearRoom(),5===e.gamers&&e.node.getChildByName("Signal").getComponent(T).clear(),e.all_players.forEach((function(e){return e.labelLeft=""})),e.call_wasm_func(17)}),2e3)}},{key:"ClearRank",value:function(e){this.setRank(e),this.setSuit(16,0),this.setScore(0)}},{key:"setBanker",value:function(e){this.all_players.forEach((function(t,i){t.labelRight=i===e?S.room.banker:""}))}},{key:"Countdown_Grab",value:function(e){this.countdown=e,this.CtGrab()}},{key:"setOwner",value:function(e){this.all_players.forEach((function(t,i){t.labelLeft=i===e?S.room.owner:""})),this.node.getChildByName("Grab").pauseSystemEvents(!1),this.node.getChildByName("Grab").children.forEach((function(e){return e.active=!1}))}},{key:"setSuit",value:function(e,t){var i=this.node.getChildByName("Rank").getChildByName("Suit").getComponent(w);switch(e){case 0:i.string="♦",i.color=u.RED;break;case 1:i.string="♣",i.color=u.BLACK;break;case 2:i.string="♥",i.color=u.RED;break;case 3:i.string="♠",i.color=u.BLACK;break;default:i.string=""}this.node.getChildByName("Rank").getChildByName("Times").getComponent(w).string=t>1?"x".concat(t):""}},{key:"PostRemainder",value:function(){var e=this;this.timerid=setTimeout((function(){e.timerid=0,e.handArea.resumeSystemEvents(!1),e.grab_end=!0,e.node.getChildByName("Remaind").removeAllChildren(),e.TipsNodes.forEach((function(e){return e.parent=null})),e.handArea.removeAllChildren(),e.call_wasm_func(7);for(var t=new Array(5),i=0;i<5;i+=1)t[i]=e.AI.wasm_view.getUint8(i);for(var a=t.reduce((function(e,t){return e+t}),0),s=0;s<a;s+=1)e.all_cards[e.getFreeCard(e.AI.wasm_view.getUint8(5+s))].node.parent=e.handArea;for(var n=0,r=0;r<5;r+=1)0!==t[r]&&(n+=t[r],e.TipsNodes[r].getComponent(w).string=String(t[r]),e.TipsNodes[r].parent=e.handArea.children[n-1]);e.ShowHand(),e.call_wasm_func(15)}),3e3)}},{key:"CtGrab",value:function(){var e=this;if(this.countdown<1){if(this.timer.getComponent(w).string="",!N.alone){this.delayid=setTimeout((function(){e.delayid=0;var t=new ArrayBuffer(2),i=new DataView(t),a=0;i.setUint8(a,41),a+=1,i.setUint8(a,0),a+=1,p.emit("WsRequest","msg",t)}),500*this.DelayNum())}this.timer.getComponent(w).string="",this.node.getChildByName("Grab").pauseSystemEvents(!1),this.node.getChildByName("Grab").children.forEach((function(e){return e.active=!1})),this.call_wasm_func(6),0!==this.AI.wasm_view.getUint8(0)&&this.setBanker(this.AI.wasm_view.getUint8(1)),0!==this.AI.wasm_view.getUint8(2)&&this.setSuit(this.AI.wasm_view.getUint8(3),1);var t=this.AI.wasm_view.getUint8(4);if(t>0){for(var i=this.node.getChildByName("Remaind"),a=0;a<t;a+=1)this.all_cards[this.getFreeCard(this.AI.wasm_view.getUint8(5+a))].node.parent=i;this.showCards(i)}this.PostRemainder()}else{this.timer.getComponent(w).string=String(this.countdown),this.countdown-=1;this.timerid=setTimeout((function(){e.timerid=0,e.CtGrab()}),1e3)}}},{key:"setRank",value:function(e){this.node.getChildByName("Rank").getChildByName("Rank").getComponent(w).string=this.rankChar(e)}},{key:"rankChar",value:function(e){var t;switch(e){case 1:t="A";break;case 11:t="J";break;case 12:t="Q";break;case 13:t="K";break;default:t=String(e)}return t}}]),d}(I))||E);h._RF.pop()}}}));

System.register("chunks:///_virtual/Signal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UI.ts"],(function(e){var t,n,i,o,h,s,a,r,c,d,l,g,u,m,y,C,p,v;return{setters:[function(e){t=e.inherits,n=e.createSuper,i=e.classCallCheck,o=e.defineProperty,h=e.assertThisInitialized,s=e.createClass,a=e.createForOfIteratorHelper},function(e){r=e.cclegacy,c=e._decorator,d=e.Vec2,l=e.Vec3,g=e.Widget,u=e.Node,m=e.Label,y=e.Color,C=e.UITransform,p=e.Component},function(e){v=e.mycolor}],execute:function(){var f;r._RF.push({},"27612Jst+RHvpKl55Ni8qGP","Signal",void 0);var N=c.ccclass;e("Signal",N("Signal")(f=function(e){t(c,e);var r=n(c);function c(){var e;i(this,c);for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e=r.call.apply(r,[this].concat(n)),o(h(e),"_serial",0),o(h(e),"_suit",16),o(h(e),"_point",0),o(h(e),"_focus",!1),o(h(e),"endVec2",new d),o(h(e),"endVec3",new l),e}return s(c,[{key:"serial",get:function(){return this._serial}},{key:"suit",get:function(){return this._suit}},{key:"point",get:function(){return this._point}},{key:"focus",get:function(){return this._focus}},{key:"init",value:function(e){for(var t=e;t<6;t+=1)this.node.getChildByName("Serial").children[0].children[t].active=!1;this.node.getChildByName("Serial").children[0].getComponent(g).bottom=-.85*e}},{key:"set",value:function(e,t){this._focus=!1,this.node.off(u.EventType.TOUCH_END,this.touchend,this),this.node.getChildByName("Serial").children[0].off(u.EventType.TOUCH_END,this.touchend2,this),this.node.getChildByName("Suit").children[0].off(u.EventType.TOUCH_END,this.touchend2,this),this.node.getChildByName("Point").children[0].off(u.EventType.TOUCH_END,this.touchend2,this),this._serial=e,this._point=t%13,0===this._point&&(this._point=13),this._suit=(t-this.point)/13,this.node.getChildByName("Serial").getComponent(m).string=String(e),this.node.getChildByName("Suit").getComponent(m).string=this.node.getChildByName("Suit").children[0].getChildByName(String(this._suit)).getChildByName("Label").getComponent(m).string,this.node.getChildByName("Suit").getComponent(m).color=1&this._suit?y.BLACK:y.RED,this.node.getChildByName("Point").getComponent(m).string=this.node.getChildByName("Point").children[0].getChildByName(String(this.point)).getChildByName("Label").getComponent(m).string,this.node.getChildByName("Serial").children[0].active=!1,this.node.getChildByName("Suit").children[0].active=!1,this.node.getChildByName("Point").children[0].active=!1}},{key:"reset",value:function(e,t){this._focus=!0,this.node.on(u.EventType.TOUCH_END,this.touchend,this),this.node.getChildByName("Serial").children[0].on(u.EventType.TOUCH_END,this.touchend2,this),this.node.getChildByName("Suit").children[0].on(u.EventType.TOUCH_END,this.touchend2,this),this.node.getChildByName("Point").children[0].on(u.EventType.TOUCH_END,this.touchend2,this),this._serial=0,this._suit=16,this._point=0,this.node.getChildByName("Serial").getComponent(m).string="▼",this.node.getChildByName("Suit").getComponent(m).string="▼",this.node.getChildByName("Suit").getComponent(m).color=v,this.node.getChildByName("Point").getComponent(m).string="▼";var n,i=a(this.node.getChildByName("Suit").children[0].children);try{for(i.s();!(n=i.n()).done;){var o=n.value;Number(o.name)===e?o.active=!1:o.active=!0}}catch(e){i.e(e)}finally{i.f()}var h,s=a(this.node.getChildByName("Point").children[0].children);try{for(s.s();!(h=s.n()).done;){var r=h.value;Number(r.name)===t?r.active=!1:r.active=!0}}catch(e){s.e(e)}finally{s.f()}}},{key:"clear",value:function(){this.node.getChildByName("Serial").getComponent(m).string=null,this.node.getChildByName("Suit").getComponent(m).string=null,this.node.getChildByName("Point").getComponent(m).string=null}},{key:"touchend",value:function(e){e.propagationStopped=!0,e.getUILocation(this.endVec2),this.endVec3.x=this.endVec2.x,this.endVec3.y=this.endVec2.y,this.endVec3.z=0,this.node.getComponent(C).convertToNodeSpaceAR(this.endVec3,this.endVec3),this.endVec2.x=this.endVec3.x,this.endVec2.y=this.endVec3.y;var t,n=a(this.node.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.getComponent(C).getBoundingBox().contains(this.endVec2)){"L"!==i.name&&(i.children[0].active=!i.children[0].active);break}}}catch(e){n.e(e)}finally{n.f()}}},{key:"touchend2",value:function(e){e.propagationStopped=!0,e.getUILocation(this.endVec2),this.endVec3.x=this.endVec2.x,this.endVec3.y=this.endVec2.y,this.endVec3.z=0,e.target.getComponent(C).convertToNodeSpaceAR(this.endVec3,this.endVec3),this.endVec2.x=this.endVec3.x,this.endVec2.y=this.endVec3.y;var t,n=a(e.target.children);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.active&&i.getComponent(C).getBoundingBox().contains(this.endVec2)){switch(e.target.name){case"N":this._serial=Number(i.name),e.target.active=!1,e.target.parent.getComponent(m).string=i.name;break;case"S":this._suit=Number(i.name),e.target.active=!1,e.target.parent.getComponent(m).string=i.children[0].getComponent(m).string,e.target.parent.getComponent(m).color=1&this._suit?y.BLACK:y.RED;break;case"P":this._point=Number(i.name),e.target.active=!1,e.target.parent.getComponent(m).string=i.children[0].getComponent(m).string}break}}}catch(e){n.e(e)}finally{n.f()}}}]),c}(p))||f);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Room_0', 'chunks:///_virtual/Room_0'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});